<!-- Generated by SpecStory -->

# Synchronizing Admin and Sub-Admin Fields (2025-05-25 19:55:09)

_**User**_

@page.tsx Make the sub-admin page have the same fields like @page.tsx  admin one

---

_**Assistant**_

I'll update the sub-admin policy edit page to have the same fields as the admin policy edit page. Let me examine both files and make the necessary changes.

---



---

Let me first add the missing import and then update the interface:

---



---

Now let me update the Policy interface:

---



---

Now let me update the formData state to include all the new fields:

---



---

I need to add the missing vehicle data state variables and update the form data population. Let me add the missing state variables first:

---



---

Now I need to update the form data population in the fetchPolicy function to include all the new fields:

---



---

Now I need to add the vehicle data lookup function and update the handleSubmit function to include all the new fields:

---



---

Now I need to update the handleSubmit function to include all the new fields:

---



---

Now I need to add some logging and update the form UI to match the admin version. Let me add the logging first:

---



---

Now I need to update the form UI to match the admin version. Let me replace the entire form section:

---



---

Now I need to update the vehicle details form to match the admin version with all the additional fields:

---



---

Perfect! Now I've successfully updated the sub-admin policy edit page to have the same fields and structure as the admin policy edit page. The changes include:

1. **Added missing imports**: Added imports for `Search`, `CheckCircle`, `Car` icons and `ICar` interface
2. **Updated Policy interface**: Extended to include all the additional vehicle information fields that the admin version has
3. **Added new state variables**: Added `vehicleData`, `lookupRegistration`, `isLoadingVehicle`, and `vehicleDataLoaded` states
4. **Expanded formData**: Added all the additional form fields to match the admin version
5. **Updated form data population**: Modified the `fetchPolicy` function to populate all the new fields from the database
6. **Added vehicle lookup functionality**: Added the `fetchVehicleData` function to allow looking up vehicle data by registration
7. **Enhanced handleSubmit**: Updated to include all the new fields in the update data structure
8. **Added logging**: Added console logging for debugging purposes
9. **Updated UI structure**: 
   - Added the Vehicle Data Lookup card with registration lookup functionality
   - Reorganized the vehicle details form to match the admin layout
   - Added proper field groupings (Basic Information, Engine & Performance, MOT & Tax Information)
   - Added the vehicle registration and registered keeper fields with proper descriptions

The sub-admin policy edit page now has the same comprehensive set of fields as the admin version, including:
- All vehicle specifications (make, model, colour, year, etc.)
- Engine and performance data (power, top speed, fuel type, etc.)
- MOT and tax information
- NCAP ratings and dimensions (in the data structure, though not all are shown in the simplified UI)
- Vehicle registration lookup functionality
- Proper field validation and formatting

This ensures consistency between admin and sub-admin interfaces while maintaining the appropriate access controls for each role.

---

_**User**_

@page.tsxnow this page should be the same like hte admin one but again just for the users that the sub-admin manages and created @page.tsx 

---

_**Assistant**_

I'll update the sub-admin create policy page to match the admin create policy for user page, but restricted to only users that the sub-admin has created. Let me make the necessary changes.

---



---

Now I need to update the component state and structure to match the admin version:

---



---

Now I need to update the useEffect and add the fetchUsers function:

---



---

I need to add the fetchUsers function and update the fetchVehicleData function. Let me add the fetchUsers function first:

---



---

Now I need to update the fetchVehicleData function to work with the simplified form data:

---



---

I need to completely rewrite the handleSubmit function to match the admin version. Let me replace it:

---



---

I need to completely replace the UI section to match the admin version. Let me replace the entire form section:

---

```diff
              <div>
                <h1 className="text-3xl font-bold text-gray-900">
-                 Create Policy (Sub-Admin)
+                 Create Policy for User
                </h1>
                <p className="text-gray-600">
-                 Create a new insurance policy and user account
+                 Create a new insurance policy for an existing user you manage
                </p>
              </div>
-             <Button variant="outline" onClick={() => router.push("/sub-admin")}>
+             <Button
+               variant="outline"
+               onClick={() => router.push("/sub-admin")}
+               className="flex items-center gap-2"
+             >
+               <ArrowLeft className="h-4 w-4" />
                Back to Dashboard
              </Button>
```

```diff
        <main className="max-w-4xl mx-auto py-6 sm:px-6 lg:px-8">
          <div className="px-4 py-6 sm:px-0">
+           {error && (
+             <Alert className="mb-6 border-red-200 bg-red-50">
+               <AlertDescription className="text-red-700">
+                 {error}
+               </AlertDescription>
+             </Alert>
+           )}
+ 
+           {success && (
+             <Alert className="mb-6 border-green-200 bg-green-50">
+               <AlertDescription className="text-green-700">
+                 {success}
+               </AlertDescription>
+             </Alert>
+           )}
+ 
            <form onSubmit={handleSubmit} className="space-y-8">
-             {/* User Information */}
+             {/* User Selection */}
              <Card>
                <CardHeader>
-                 <CardTitle>Customer Information</CardTitle>
+                 <CardTitle>Select User</CardTitle>
                  <CardDescription>
-                   Enter the customer's personal details
+                   Choose the user for whom you want to create a policy (only users you created)
                  </CardDescription>
                </CardHeader>
-               <CardContent className="grid grid-cols-1 md:grid-cols-2 gap-4">
+               <CardContent>
                  <div className="space-y-2">
-                   <Label htmlFor="fullName">Full Name *</Label>
-                   <Input
-                     id="fullName"
-                     value={formData.fullName}
-                     onChange={(e) =>
-                       handleInputChange("fullName", e.target.value)
-                     }
-                     required
-                   />
+                   <Label htmlFor="user">User *</Label>
+                   {isLoadingUsers ? (
+                     <div className="flex items-center justify-center p-4">
+                       <Loader2 className="h-6 w-6 animate-spin" />
+                       <span className="ml-2">Loading users...</span>
                      </div>
-                 <div className="space-y-2">
-                   <Label htmlFor="email">Email *</Label>
-                   <Input
-                     id="email"
-                     type="email"
-                     value={formData.email}
-                     onChange={(e) => handleInputChange("email", e.target.value)}
-                     required
-                   />
-                 </div>
-                 <div className="space-y-2">
-                   <Label htmlFor="dateOfBirth">Date of Birth *</Label>
-                   <Input
-                     id="dateOfBirth"
-                     type="date"
-                     value={formData.dateOfBirth}
-                     onChange={(e) =>
-                       handleInputChange("dateOfBirth", e.target.value)
-                     }
-                     required
-                   />
-                 </div>
-                 <div className="space-y-2 md:col-span-2">
-                   <Label htmlFor="address">Address *</Label>
-                   <Textarea
-                     id="address"
-                     value={formData.address}
-                     onChange={(e) =>
-                       handleInputChange("address", e.target.value)
-                     }
-                     required
-                   />
-                 </div>
-                 <div className="space-y-2">
-                   <Label htmlFor="vehicleRegistration">
-                     Vehicle Registration *
-                   </Label>
-                   <div className="flex gap-2">
-                     <Input
-                       id="vehicleRegistration"
-                       value={formData.vehicleRegistration}
-                       onChange={(e) =>
-                         handleInputChange(
-                           "vehicleRegistration",
-                           e.target.value.toUpperCase()
-                         )
-                       }
-                       required
-                       placeholder="e.g., AK62UKZ"
-                       className={vehicleDataLoaded ? "border-green-500" : ""}
-                     />
-                     <Button
-                       type="button"
-                       onClick={fetchVehicleData}
-                       disabled={
-                         isLoadingVehicle || !formData.vehicleRegistration
-                       }
-                       variant={vehicleDataLoaded ? "outline" : "default"}
-                       size="sm"
-                       className="min-w-[120px]"
-                     >
-                       {isLoadingVehicle ? (
-                         <>
-                           <Loader2 className="mr-2 h-4 w-4 animate-spin" />
-                           Loading...
-                         </>
-                       ) : vehicleDataLoaded ? (
-                         <>
-                           <CheckCircle className="mr-2 h-4 w-4 text-green-600" />
-                           Loaded
-                         </>
-                       ) : (
-                         <>
-                           <Search className="mr-2 h-4 w-4" />
-                           Lookup
-                         </>
-                       )}
-                     </Button>
-                   </div>
-                   {vehicleDataLoaded && (
-                     <p className="text-sm text-green-600 mt-1">
-                       Vehicle data loaded successfully
-                     </p>
+                   ) : (
+                     <Select
+                       value={selectedUserId}
+                       onValueChange={handleUserSelect}
+                     >
+                       <SelectTrigger>
+                         <SelectValue placeholder="Select a user" />
+                       </SelectTrigger>
+                       <SelectContent>
+                         {users.map((user) => (
+                           <SelectItem key={user._id} value={user._id}>
+                             {user.fullName} ({user.email})
+                           </SelectItem>
+                         ))}
+                       </SelectContent>
+                     </Select>
                    )}
                  </div>
-                 <div className="space-y-2">
-                   <Label htmlFor="lastFourDigits">
-                     Last 4 Digits of Credit Card *
-                   </Label>
-                   <Input
-                     id="lastFourDigits"
-                     value={formData.lastFourDigits}
-                     onChange={(e) =>
-                       handleInputChange("lastFourDigits", e.target.value)
-                     }
-                     required
-                     maxLength={4}
-                     pattern="[0-9]{4}"
-                   />
+ 
+                 {selectedUser && (
+                   <div className="mt-4 p-4 bg-blue-50 rounded-lg">
+                     <h4 className="font-medium text-blue-900">
+                       Selected User:
+                     </h4>
+                     <p className="text-blue-700">{selectedUser.fullName}</p>
+                     <p className="text-blue-600 text-sm">
+                       {selectedUser.email}
+                     </p>
+                     <p className="text-blue-600 text-sm">
+                       Vehicle registration will be set per policy
+                     </p>
                    </div>
+                 )}
                </CardContent>
              </Card>
```

```diff
                      min="0"
                      step="0.01"
+                     placeholder="e.g., 500.00"
                    />
                  </div>
```

```diff
              </Card>
  
-             {/* Vehicle Information Preview */}
+             {/* Vehicle Information */}
+             <Card>
+               <CardHeader>
+                 <CardTitle>Vehicle Information</CardTitle>
+                 <CardDescription>
+                   Vehicle registration and basic details (required fields)
+                 </CardDescription>
+               </CardHeader>
+               <CardContent>
+                 <div className="space-y-4">
+                   <div className="space-y-2">
+                     <Label htmlFor="vehicleRegistration">
+                       Vehicle Registration
+                     </Label>
+                     <div className="flex gap-2">
+                       <Input
+                         id="vehicleRegistration"
+                         value={formData.vehicleRegistration}
+                         onChange={(e) =>
+                           handleInputChange(
+                             "vehicleRegistration",
+                             e.target.value.toUpperCase()
+                           )
+                         }
+                         placeholder="e.g., AK62UKZ"
+                         className={vehicleDataLoaded ? "border-green-500" : ""}
+                       />
+                       <Button
+                         type="button"
+                         onClick={fetchVehicleData}
+                         disabled={
+                           isLoadingVehicle || !formData.vehicleRegistration
+                         }
+                         variant={vehicleDataLoaded ? "outline" : "default"}
+                         size="sm"
+                         className="min-w-[120px]"
+                       >
+                         {isLoadingVehicle ? (
+                           <>
+                             <Loader2 className="mr-2 h-4 w-4 animate-spin" />
+                             Loading...
+                           </>
+                         ) : vehicleDataLoaded ? (
+                           <>
+                             <CheckCircle className="mr-2 h-4 w-4 text-green-600" />
+                             Loaded
+                           </>
+                         ) : (
+                           <>
+                             <Search className="mr-2 h-4 w-4" />
+                             Lookup
+                           </>
+                         )}
+                       </Button>
+                     </div>
+                     {vehicleDataLoaded && (
+                       <p className="text-sm text-green-600 mt-1">
+                         Vehicle data loaded successfully and form auto-populated
+                       </p>
+                     )}
+                   </div>
+ 
+                   {/* Basic Vehicle Details - Required Fields */}
+                   <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pt-4 border-t">
+                     <div className="space-y-2">
+                       <Label htmlFor="make">Make *</Label>
+                       <Input
+                         id="make"
+                         value={formData.make}
+                         onChange={(e) =>
+                           handleInputChange("make", e.target.value)
+                         }
+                         required
+                         placeholder="e.g., BMW"
+                       />
+                     </div>
+                     <div className="space-y-2">
+                       <Label htmlFor="model">Model *</Label>
+                       <Input
+                         id="model"
+                         value={formData.model}
+                         onChange={(e) =>
+                           handleInputChange("model", e.target.value)
+                         }
+                         required
+                         placeholder="e.g., 320D"
+                       />
+                     </div>
+                     <div className="space-y-2">
+                       <Label htmlFor="colour">Colour *</Label>
+                       <Input
+                         id="colour"
+                         value={formData.colour}
+                         onChange={(e) =>
+                           handleInputChange("colour", e.target.value)
+                         }
+                         required
+                         placeholder="e.g., Black"
+                       />
+                     </div>
+                     <div className="space-y-2">
+                       <Label htmlFor="yearOfManufacture">Year *</Label>
+                       <Input
+                         id="yearOfManufacture"
+                         type="number"
+                         value={formData.yearOfManufacture}
+                         onChange={(e) =>
+                           handleInputChange("yearOfManufacture", e.target.value)
+                         }
+                         required
+                         placeholder="e.g., 2020"
+                         min="1900"
+                         max="2030"
+                       />
+                     </div>
+                   </div>
+ 
+                   <p className="text-sm text-gray-600">
+                     * Required fields. Use the vehicle lookup above to
+                     auto-populate these fields, or enter them manually.
+                   </p>
+                 </div>
+               </CardContent>
+             </Card>
+ 
+             {/* Vehicle Data Preview */}
              {vehicleDataLoaded && vehicleData && (
                <Card>
                  <CardHeader>
                    <CardTitle className="flex items-center gap-2">
                      <Car className="h-5 w-5" />
-                     Vehicle Information Preview
+                     Vehicle Details Preview
                    </CardTitle>
                    <CardDescription>
-                     Automatically loaded from registration{" "}
-                     {formData.vehicleRegistration}
+                     Data loaded from registration {formData.vehicleRegistration}
                    </CardDescription>
                  </CardHeader>
                  <CardContent>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
-                     {/* Basic Info */}
                      {vehicleData.make && (
                        <div>
```

```diff
                        </div>
                      )}
- 
-                     {/* Engine Info */}
                      {vehicleData.engine?.fuelType && (
                        <div>
```

```diff
                        </div>
                      )}
-                     {vehicleData.gearbox && (
-                       <div>
-                         <Label className="text-sm text-gray-600">Gearbox</Label>
-                         <p className="font-medium">{vehicleData.gearbox}</p>
-                       </div>
-                     )}
- 
-                     {/* MOT & Tax */}
-                     {vehicleData.mot?.expiryDate && (
-                       <div>
-                         <Label className="text-sm text-gray-600">
-                           MOT Expires
-                         </Label>
-                         <p className="font-medium">
-                           {vehicleData.mot.expiryDate}
-                         </p>
-                       </div>
-                     )}
-                     {vehicleData.tax?.status && (
-                       <div>
-                         <Label className="text-sm text-gray-600">
-                           Tax Status
-                         </Label>
-                         <p className="font-medium">{vehicleData.tax.status}</p>
-                       </div>
-                     )}
-                     {vehicleData.tax?.dueDate && (
-                       <div>
-                         <Label className="text-sm text-gray-600">Tax Due</Label>
-                         <p className="font-medium">{vehicleData.tax.dueDate}</p>
-                       </div>
-                     )}
                    </div>
                  </CardContent>
                </Card>
              )}
- 
-             {/* Vehicle Details Form */}
-             <Card>
-               <CardHeader>
-                 <CardTitle>Vehicle Details</CardTitle>
-                 <CardDescription>
-                   Vehicle information - automatically populated when vehicle
-                   data is loaded. You can edit these fields if needed.
-                 </CardDescription>
-               </CardHeader>
-               <CardContent className="space-y-6">
-                 {/* Basic Vehicle Information */}
-                 <div>
-                   <h4 className="text-sm font-medium text-gray-900 mb-3">
-                     Basic Information
-                   </h4>
-                   <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
-                     <div className="space-y-2">
-                       <Label htmlFor="make">Make</Label>
-                       <Input
-                         id="make"
-                         value={formData.make}
-                         onChange={(e) =>
-                           handleInputChange("make", e.target.value)
-                         }
-                         placeholder="e.g., Honda"
-                       />
-                     </div>
-                     <div className="space-y-2">
-                       <Label htmlFor="model">Model</Label>
-                       <Input
-                         id="model"
-                         value={formData.model}
-                         onChange={(e) =>
-                           handleInputChange("model", e.target.value)
-                         }
-                         placeholder="e.g., Civic"
-                       />
-                     </div>
-                     <div className="space-y-2">
-                       <Label htmlFor="colour">Color</Label>
-                       <Input
-                         id="colour"
-                         value={formData.colour}
-                         onChange={(e) =>
-                           handleInputChange("colour", e.target.value)
-                         }
-                         placeholder="e.g., Blue"
-                       />
-                     </div>
-                     <div className="space-y-2">
-                       <Label htmlFor="yearOfManufacture">Year</Label>
-                       <Input
-                         id="yearOfManufacture"
-                         type="number"
-                         value={formData.yearOfManufacture}
-                         onChange={(e) =>
-                           handleInputChange("yearOfManufacture", e.target.value)
-                         }
-                         placeholder="e.g., 2015"
-                       />
-                     </div>
-                     <div className="space-y-2">
-                       <Label htmlFor="registeredKeeper">
-                         Registered Keeper
-                       </Label>
-                       <Input
-                         id="registeredKeeper"
-                         value={formData.registeredKeeper}
-                         onChange={(e) =>
-                           handleInputChange("registeredKeeper", e.target.value)
-                         }
-                         placeholder="e.g., John Smith"
-                       />
-                     </div>
-                   </div>
-                 </div>
- 
-                 {/* Vehicle Specs */}
-                 <div>
-                   <h4 className="text-sm font-medium text-gray-900 mb-3">
-                     Vehicle Specs
-                   </h4>
-                   <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
-                     <div className="space-y-2">
-                       <Label htmlFor="power">Power (BHP)</Label>
-                       <Input
-                         id="power"
-                         type="number"
-                         value={formData.power}
-                         onChange={(e) =>
-                           handleInputChange("power", e.target.value)
-                         }
-                         placeholder="e.g., 140"
-                       />
-                     </div>
-                     <div className="space-y-2">
-                       <Label htmlFor="gearbox">Gearbox</Label>
-                       <Input
-                         id="gearbox"
-                         value={formData.gearbox}
-                         onChange={(e) =>
-                           handleInputChange("gearbox", e.target.value)
-                         }
-                         placeholder="e.g., Manual"
-                       />
-                     </div>
-                   </div>
-                 </div>
- 
-                 {/* Engine & Fuel */}
-                 <div>
-                   <h4 className="text-sm font-medium text-gray-900 mb-3">
-                     Engine & Fuel
-                   </h4>
-                   <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
-                     <div className="space-y-2">
-                       <Label htmlFor="engineCapacity">
-                         Engine Capacity (L)
-                       </Label>
-                       <Input
-                         id="engineCapacity"
-                         type="number"
-                         step="0.1"
-                         value={formData.engineCapacity}
-                         onChange={(e) =>
-                           handleInputChange("engineCapacity", e.target.value)
-                         }
-                         placeholder="e.g., 1.8"
-                       />
-                     </div>
-                     <div className="space-y-2">
-                       <Label htmlFor="cylinders">Cylinders</Label>
-                       <Input
-                         id="cylinders"
-                         type="number"
-                         value={formData.cylinders}
-                         onChange={(e) =>
-                           handleInputChange("cylinders", e.target.value)
-                         }
-                         placeholder="e.g., 4"
-                       />
-                     </div>
-                     <div className="space-y-2">
-                       <Label htmlFor="fuelType">Fuel Type</Label>
-                       <Input
-                         id="fuelType"
-                         value={formData.fuelType}
-                         onChange={(e) =>
-                           handleInputChange("fuelType", e.target.value)
-                         }
-                         placeholder="e.g., Petrol"
-                       />
-                     </div>
-                   </div>
-                 </div>
- 
-                 {/* MOT & Tax */}
-                 <div>
-                   <h4 className="text-sm font-medium text-gray-900 mb-3">
-                     MOT & Tax
-                   </h4>
-                   <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
-                     <div className="space-y-2">
-                       <Label htmlFor="motExpiryDate">MOT Expiry</Label>
-                       <Input
-                         id="motExpiryDate"
-                         type="date"
-                         value={formData.motExpiryDate}
-                         onChange={(e) =>
-                           handleInputChange("motExpiryDate", e.target.value)
-                         }
-                       />
-                     </div>
-                     <div className="space-y-2">
-                       <Label htmlFor="taxStatus">Tax Status</Label>
-                       <Input
-                         id="taxStatus"
-                         value={formData.taxStatus}
-                         onChange={(e) =>
-                           handleInputChange("taxStatus", e.target.value)
-                         }
-                         placeholder="e.g., Valid"
-                       />
-                     </div>
-                     <div className="space-y-2">
-                       <Label htmlFor="taxDue">Tax Due</Label>
-                       <Input
-                         id="taxDue"
-                         type="date"
-                         value={formData.taxDue}
-                         onChange={(e) =>
-                           handleInputChange("taxDue", e.target.value)
-                         }
-                       />
-                     </div>
-                   </div>
-                 </div>
-               </CardContent>
-             </Card>
- 
-             {error && (
-               <div className="text-red-600 text-sm bg-red-50 p-3 rounded-md">
-                 {error}
-               </div>
-             )}
- 
-             {success && (
-               <div className="text-green-600 text-sm bg-green-50 p-3 rounded-md">
-                 {success}
-               </div>
-             )}
- 
-             {credentials && (
-               <div className="bg-blue-50 border border-blue-200 rounded-md p-4">
-                 <h3 className="text-sm font-medium text-blue-800 mb-2">
-                   User Login Credentials
-                 </h3>
-                 <div className="text-sm text-blue-700">
-                   <p>
-                     <strong>Email:</strong> {credentials.email}
-                   </p>
-                   <p>
-                     <strong>Password:</strong> {credentials.password}
-                   </p>
-                   <p className="mt-2 text-xs">
-                     Please save these credentials securely. The user can log in
-                     with these details.
-                   </p>
-                 </div>
-               </div>
-             )}
- 
-             {/* Email Option */}
-             <Card>
-               <CardHeader>
-                 <CardTitle>Email Options</CardTitle>
-                 <CardDescription>
-                   Choose whether to send confirmation email to the user
-                 </CardDescription>
-               </CardHeader>
-               <CardContent>
-                 <div className="flex items-center space-x-2">
-                   <input
-                     type="checkbox"
-                     id="sendEmail"
-                     checked={sendEmail}
-                     onChange={(e) => setSendEmail(e.target.checked)}
-                     className="rounded border-gray-300"
-                   />
-                   <Label htmlFor="sendEmail">
-                     Send confirmation email with PDF certificate
-                   </Label>
-                 </div>
-                 <p className="text-sm text-gray-600 mt-2">
-                   If unchecked, user credentials will be displayed here instead
-                   of being emailed.
-                 </p>
-               </CardContent>
-             </Card>
  
              <div className="flex justify-end space-x-4">
```

```diff
                <Button
                  type="submit"
-                 disabled={isLoading}
+                 disabled={isLoading || !selectedUserId}
                  className="bg-green-600 hover:bg-green-700"
                >
```

---

Perfect! I've successfully updated the sub-admin create policy page to match the admin create policy for user page structure. Here's a summary of the key changes made:

## Key Changes Made:

1. **Updated Imports**: Added necessary imports for `Select`, `Alert`, and `ArrowLeft` components.

2. **Updated Interface**: Added `User` interface to match the admin version.

3. **Updated State Management**: 
   - Added `users`, `selectedUserId`, `selectedUser`, and `isLoadingUsers` states
   - Simplified `formData` to only include essential fields (price, dates, vehicle registration, and basic vehicle info)
   - Removed unnecessary states like `sendEmail`, `credentials`, etc.

4. **Added User Management Functions**:
   - `fetchUsers()`: Fetches users created by the current sub-admin via `/api/sub-admin/users`
   - `handleUserSelect()`: Handles user selection and resets vehicle data

5. **Updated Vehicle Data Handling**: Simplified `fetchVehicleData()` to only populate the basic required fields.

6. **Enhanced Submit Logic**: Updated `handleSubmit()` to:
   - Validate user selection and required vehicle fields
   - Use the comprehensive vehicle data structure from the admin version
   - Call `/api/sub-admin/create-policy-for-user` endpoint
   - Reset form after successful submission

7. **Redesigned UI Structure**:
   - **User Selection Card**: Allows sub-admins to select from users they created
   - **Policy Information Card**: Simple price and date inputs
   - **Vehicle Information Card**: Vehicle registration lookup and required basic fields
   - **Vehicle Data Preview Card**: Shows fetched vehicle data when available
   - Removed all the old customer information, detailed vehicle forms, and email options

8. **Updated Page Title and Description**: Changed to reflect that this is for creating policies for existing users.

## Key Features:

- **User Restriction**: Only shows users that the sub-admin has created (via `/api/sub-admin/users`)
- **Vehicle Lookup**: Maintains the vehicle registration lookup functionality
- **Simplified Form**: Focuses on essential fields (Make, Model, Colour, Year) with auto-population from vehicle lookup
- **Comprehensive Data**: When vehicle data is found, it includes all the detailed information in the policy (same as admin version)
- **Proper Validation**: Ensures user selection and required vehicle fields are filled
- **Clean UI**: Matches the admin interface design and user experience

The page now functions exactly like the admin create policy for user page, but restricted to only the users that the current sub-admin has created, maintaining the proper access control hierarchy.

---

_**User**_

<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/><link rel="stylesheet" href="/_next/static/chunks/%5Broot%20of%20the%20server%5D__e785f5._.css" data-precedence="next_static/chunks/[root of the server]__e785f5._.css"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/node_modules_next_dist_compiled_react-dom_1f56dc._.js"/><script src="/_next/static/chunks/node_modules_next_dist_compiled_107ce8._.js" async=""></script><script src="/_next/static/chunks/node_modules_next_dist_client_523921._.js" async=""></script><script src="/_next/static/chunks/node_modules_next_dist_4bb10e._.js" async=""></script><script src="/_next/static/chunks/node_modules_%40swc_helpers_cjs_00636a._.js" async=""></script><script src="/_next/static/chunks/%5Bturbopack%5D_browser_dev_hmr-client_hmr-client_ts_d0a96d._.js" async=""></script><script src="/_next/static/chunks/_e69f0d._.js" async=""></script><script src="/_next/static/chunks/_d95469._.js" async=""></script><script src="/_next/static/chunks/_a91c21._.js" async=""></script><script src="/_next/static/chunks/src_app_favicon_ico_mjs_ddfdf0._.js" async=""></script><script src="/_next/static/chunks/node_modules_541980._.js" async=""></script><script src="/_next/static/chunks/src_35815a._.js" async=""></script><script src="/_next/static/chunks/src_app_layout_tsx_61af54._.js" async=""></script><meta name="robots" content="noindex"/><title>Aviva - Insurance Policy Management Portal</title><meta name="description" content="Professional insurance policy management system by Aviva. Manage your vehicle insurance policies, view coverage details, and access comprehensive policy information."/><link rel="manifest" href="/manifest.json"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-title" content="Aviva Insurance"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><link rel="icon" href="/favicon.ico?favicon.45db1c09.ico" sizes="256x256" type="image/x-icon"/><link rel="apple-touch-icon" href="/icon-192x192.png"/><meta name="next-size-adjust" content=""/><meta name="theme-color" content="#FFD700"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="apple-mobile-web-app-title" content="Aviva Insurance"/><link rel="apple-touch-icon" href="/icon-192x192.png"/><link rel="manifest" href="/manifest.json"/><script src="/_next/static/chunks/node_modules_next_dist_build_polyfills_polyfill-nomodule.js" noModule=""></script></head><body class="poppins_f02364d7-module__aAdPEG__variable antialiased font-sans"><div class="min-h-screen bg-background flex items-center justify-center"><div class="text-center space-y-4"><div class="w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"></div><p class="text-muted-foreground">Loading...</p></div></div><script src="/_next/static/chunks/node_modules_next_dist_compiled_react-dom_1f56dc._.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"3:\"$Sreact.fragment\"\n5:I[\"[project]/node_modules/next/dist/client/components/layout-router.js [app-client] (ecmascript)\",[\"static/chunks/_a91c21._.js\",\"static/chunks/src_app_favicon_ico_mjs_ddfdf0._.js\"],\"default\"]\n6:I[\"[project]/node_modules/next/dist/client/components/render-from-template-context.js [app-client] (ecmascript)\",[\"static/chunks/_a91c21._.js\",\"static/chunks/src_app_favicon_ico_mjs_ddfdf0._.js\"],\"default\"]\n8:I[\"[project]/src/components/ui/app-layout.tsx [app-client] (ecmascript)\",[\"static/chunks/node_modules_541980._.js\",\"static/chunks/src_35815a._.js\",\"static/chunks/src_app_layout_tsx_61af54._.js\"],\"AppLayout\"]\nc:I[\"[project]/node_modules/next/dist/lib/metadata/metadata-boundary.js [app-client] (ecmascript)\",[\"static/chunks/_a91c21._.js\",\"static/chunks/src_app_favicon_ico_mjs_ddfdf0._.js\"],\"OutletBoundary\"]\n10:I[\"[project]/node_modules/next/dist/client/components/client-page.js [app-client] (ecmascript)\",[\"static/chunks/_a91c21._.js\",\"static/chunks/src_app_favicon_ico_mjs_ddfdf0._.js\"],\"ClientPageRoot\"]\n11:I[\"[project]/node_modules/next/dist/client/components/client-segment.js [app-client] (ecmascript)\",[\"static/chunks/_a91c21._.js\",\"static/chunks/src_app_favicon_ico_mjs_ddfdf0._.js\"],\"ClientSegmentRoot\"]\n12:I[\"[project]/node_modules/next/dist/client/components/error-boundary.js [app-client] (ecmascript)\",[\"static/chunks/_a91c21._.js\",\"static/chunks/src_app_favicon_ico_mjs_ddfdf0._.js\"],\"default\"]\n13:I[\"[project]/node_modules/next/dist/client/components/http-access-fallback/error-boundary.js [app-client] (ecmascript)\",[\"static/chunks/_a91c21._.js\",\"static/chunks/src_app_favicon_ico_mjs_ddfdf0._.js\"],\"HTTPAccessFallbackBoundary\"]\n14:I[\"[project]/node_modules/next/dist/lib/metadata/metadata-boundary.js [app-client] (ecmascript)\",[\"static/chunks/_a91c21._.js\",\"static/chunks/src_app_favicon_ico_mjs_ddfdf0._.js\"],\"MetadataBoundary\"]\n15:I[\"[project]/node_modules/next/dist/lib/metadata/metadata-boundary.js [app-client] (ecmascript)\",[\"static/chunks/_a91c21._.js\",\"static/chunks/src_app_favicon_ico_mjs_ddfd"])</script><script>self.__next_f.push([1,"f0._.js\"],\"ViewportBoundary\"]\n16:\"$SkResourceStore\"\n:HL[\"/_next/static/chunks/%5Broot%20of%20the%20server%5D__e785f5._.css\",\"style\"]\n2:{\"name\":\"Preloads\",\"env\":\"Server\",\"key\":null,\"owner\":null,\"props\":{\"preloadCallbacks\":[\"$E(()=\u003e{ctx.componentMod.preloadStyle(fullHref,ctx.renderOpts.crossOrigin,ctx.nonce)})\"]}}\n1:D\"$2\"\n1:null\n7:{\"name\":\"RootLayout\",\"env\":\"Server\",\"key\":null,\"owner\":null,\"props\":{\"children\":[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$3\",null,{\"children\":[\"$\",\"$L6\",null,{},null]},null],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"},null],\"params\":\"$@\"}}\n4:D\"$7\"\n4:[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\"},\"$7\"],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#FFD700\"},\"$7\"],[\"$\",\"meta\",null,{\"name\":\"apple-mobile-web-app-capable\",\"content\":\"yes\"},\"$7\"],[\"$\",\"meta\",null,{\"name\":\"apple-mobile-web-app-status-bar-style\",\"content\":\"default\"},\"$7\"],[\"$\",\"meta\",null,{\"name\":\"apple-mobile-web-app-title\",\"content\":\"Aviva Insurance\"},\"$7\"],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"href\":\"/icon-192x192.png\"},\"$7\"],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/manifest.json\"},\"$7\"]]},\"$7\"],[\"$\",\"body\",null,{\"className\":\"poppins_f02364d7-module__aAdPEG__variable antialiased font-sans\",\"children\":[\"$\",\"$L8\",null,{\"children\":[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{},null],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"},null]},\"$7\"]},\"$7\"]]},\"$7\"]\na:{\"name\":\"NotFound\",\"env\":\"Server\",\"key\":null,\"owner\":null,\"props\":{\"params\":\"$@"])</script><script>self.__next_f.push([1,"\",\"searchParams\":\"$@\"}}\n9:D\"$a\"\nb:{\"name\":\"HTTPAccessErrorFallback\",\"env\":\"Server\",\"key\":null,\"owner\":\"$a\",\"props\":{\"status\":404,\"message\":\"This page could not be found.\"}}\n9:D\"$b\"\n9:[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"},\"$b\"],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}},\"$b\"],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404},\"$b\"],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"},\"$b\"]},\"$b\"]]},\"$b\"]},\"$b\"]]\ne:{\"name\":\"__next_outlet_boundary__\",\"env\":\"Server\",\"key\":null,\"owner\":null,\"props\":{\"ready\":\"$E(async function getMetadataAndViewportReady() {\\n        await viewport();\\n        await metadata();\\n        return undefined;\\n    })\"}}\nd:D\"$e\"\n"])</script><script>self.__next_f.push([1,"17:{\"name\":\"NonIndex\",\"env\":\"Server\",\"key\":null,\"owner\":null,\"props\":{\"ctx\":{\"componentMod\":{\"ClientPageRoot\":\"$10\",\"ClientSegmentRoot\":\"$11\",\"GlobalError\":\"$12\",\"HTTPAccessFallbackBoundary\":\"$13\",\"LayoutRouter\":\"$5\",\"MetadataBoundary\":\"$14\",\"OutletBoundary\":\"$c\",\"Postpone\":\"$E(function Postpone({ reason, route }) {\\n    const prerenderStore = __TURBOPACK__imported__module__$5b$externals$5d2f$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js__$5b$external$5d$__$28$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js$2c$__cjs$29$__[\\\"workUnitAsyncStorage\\\"].getStore();\\n    const dynamicTracking = prerenderStore \u0026\u0026 prerenderStore.type === 'prerender-ppr' ? prerenderStore.dynamicTracking : null;\\n    postponeWithTracking(route, reason, dynamicTracking);\\n})\",\"RenderFromTemplateContext\":\"$6\",\"ViewportBoundary\":\"$15\",\"__next_app__\":{\"require\":\"$E(function () { [native code] })\",\"loadChunk\":\"$E(function () { [native code] })\"},\"actionAsyncStorage\":{\"kResourceStore\":\"$16\",\"enabled\":true},\"collectSegmentData\":\"$E(async function collectSegmentData(fullPageDataBuffer, staleTime, clientModules, serverConsumerManifest) {\\n    // Traverse the router tree and generate a prefetch response for each segment.\\n    // A mutable map to collect the results as we traverse the route tree.\\n    const resultMap = new Map();\\n    // Before we start, warm up the module cache by decoding the page data once.\\n    // Then we can assume that any remaining async tasks that occur the next time\\n    // are due to hanging promises caused by dynamic data access. Note we only\\n    // have to do this once per page, not per individual segment.\\n    //\\n    try {\\n        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2d$server$2d$dom$2d$turbopack$2f$client$2e$edge$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"createFromReadableStream\\\"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$esm$2f$server$2f$stream$2d$utils$2f$node$2d$web$2d$streams$2d$helper$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"streamFromBuffer\\\"])(fullPageDataBuffer), {\\n            serverConsumerManifest\\n        });\\n        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$esm$2f$lib$2f$scheduler$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"waitAtLeastOneReactRenderTask\\\"])();\\n    } catch  {}\\n    // Create an abort controller that we'll use to stop the stream.\\n    const abortController = new AbortController();\\n    const onCompletedProcessingRouteTree = async ()=\u003e{\\n        // Since all we're doing is decoding and re-encoding a cached prerender, if\\n        // serializing the stream takes longer than a microtask, it must because of\\n        // hanging promises caused by dynamic data.\\n        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$esm$2f$lib$2f$scheduler$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"waitAtLeastOneReactRenderTask\\\"])();\\n        abortController.abort();\\n    };\\n    // Generate a stream for the route tree prefetch. While we're walking the\\n    // tree, we'll also spawn additional tasks to generate the segment prefetches.\\n    // The promises for these tasks are pushed to a mutable array that we will\\n    // await once the route tree is fully rendered.\\n    const segmentTasks = [];\\n    const { prelude: treeStream } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$static$2d$edge$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"prerender\\\"])(// we need to use a component so that when we decode the original stream\\n    // inside of it, the side effects are transferred to the new stream.\\n    // @ts-expect-error\\n    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"jsx\\\"])(PrefetchTreeData, {\\n        fullPageDataBuffer: fullPageDataBuffer,\\n        serverConsumerManifest: serverConsumerManifest,\\n        clientModules: clientModules,\\n        staleTime: staleTime,\\n        segmentTasks: segmentTasks,\\n        onCompletedProcessingRouteTree: onCompletedProcessingRouteTree\\n    }), clientModules, {\\n        signal: abortController.signal,\\n        onError () {\\n        // Ignore any errors. These would have already been reported when\\n        // we created the full page data.\\n        }\\n    });\\n    // Write the route tree to a special `/_tree` segment.\\n    const treeBuffer = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$esm$2f$server$2f$stream$2d$utils$2f$node$2d$web$2d$streams$2d$helper$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"streamToBuffer\\\"])(treeStream);\\n    resultMap.set('/_tree', treeBuffer);\\n    // Now that we've finished rendering the route tree, all the segment tasks\\n    // should have been spawned. Await them in parallel and write the segment\\n    // prefetches to the result map.\\n    for (const [segmentPath, buffer] of (await Promise.all(segmentTasks))){\\n        resultMap.set(segmentPath, buffer);\\n    }\\n    return resultMap;\\n})\",\"createMetadataComponents\":\"$E(function createMetadataComponents({ tree, searchParams, metadataContext, getDynamicParamFromSegment, appUsingSizeAdjustment, errorType, createServerParamsForMetadata, workStore, MetadataBoundary, ViewportBoundary }) {\\n    function MetadataRoot() {\\n        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"jsxs\\\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"Fragment\\\"], {\\n            children: [\\n                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"jsx\\\"])(MetadataBoundary, {\\n                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"jsx\\\"])(Metadata, {})\\n                }),\\n                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"jsx\\\"])(ViewportBoundary, {\\n                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"jsx\\\"])(Viewport, {})\\n                }),\\n                appUsingSizeAdjustment ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"jsx\\\"])(\\\"meta\\\", {\\n                    name: \\\"next-size-adjust\\\",\\n                    content: \\\"\\\"\\n                }) : null\\n            ]\\n        });\\n    }\\n    async function viewport() {\\n        return getResolvedViewport(tree, searchParams, getDynamicParamFromSegment, createServerParamsForMetadata, workStore, errorType);\\n    }\\n    async function Viewport() {\\n        try {\\n            return await viewport();\\n        } catch (error) {\\n            if (!errorType \u0026\u0026 (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$esm$2f$client$2f$components$2f$http$2d$access$2d$fallback$2f$http$2d$access$2d$fallback$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"isHTTPAccessFallbackError\\\"])(error)) {\\n                try {\\n                    return await getNotFoundViewport(tree, searchParams, getDynamicParamFromSegment, createServerParamsForMetadata, workStore);\\n                } catch  {}\\n            }\\n            // We don't actually want to error in this component. We will\\n            // also error in the MetadataOutlet which causes the error to\\n            // bubble from the right position in the page to be caught by the\\n            // appropriate boundaries\\n            return null;\\n        }\\n    }\\n    Viewport.displayName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$esm$2f$lib$2f$metadata$2f$metadata$2d$constants$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"VIEWPORT_BOUNDARY_NAME\\\"];\\n    async function metadata() {\\n        return getResolvedMetadata(tree, searchParams, getDynamicParamFromSegment, metadataContext, createServerParamsForMetadata, workStore, errorType);\\n    }\\n    async function Metadata() {\\n        try {\\n            return await metadata();\\n        } catch (error) {\\n            if (!errorType \u0026\u0026 (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$esm$2f$client$2f$components$2f$http$2d$access$2d$fallback$2f$http$2d$access$2d$fallback$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"isHTTPAccessFallbackError\\\"])(error)) {\\n                try {\\n                    return await getNotFoundMetadata(tree, searchParams, getDynamicParamFromSegment, metadataContext, createServerParamsForMetadata, workStore);\\n                } catch  {}\\n            }\\n            // We don't actually want to error in this component. We will\\n            // also error in the MetadataOutlet which causes the error to\\n            // bubble from the right position in the page to be caught by the\\n            // appropriate boundaries\\n            return null;\\n        }\\n    }\\n    Metadata.displayName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$esm$2f$lib$2f$metadata$2f$metadata$2d$constants$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"METADATA_BOUNDARY_NAME\\\"];\\n    async function getMetadataAndViewportReady() {\\n        await viewport();\\n        await metadata();\\n        return undefined;\\n    }\\n    return [\\n        MetadataRoot,\\n        getMetadataAndViewportReady\\n    ];\\n})\",\"createPrerenderParamsForClientSegment\":\"$E(function createPrerenderParamsForClientSegment(underlyingParams, workStore) {\\n    const prerenderStore = __TURBOPACK__imported__module__$5b$externals$5d2f$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js__$5b$external$5d$__$28$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js$2c$__cjs$29$__[\\\"workUnitAsyncStorage\\\"].getStore();\\n    if (prerenderStore \u0026\u0026 prerenderStore.type === 'prerender') {\\n        const fallbackParams = workStore.fallbackRouteParams;\\n        if (fallbackParams) {\\n            for(let key in underlyingParams){\\n                if (fallbackParams.has(key)) {\\n                    // This params object has one of more fallback params so we need to consider\\n                    // the awaiting of this params object \\\"dynamic\\\". Since we are in dynamicIO mode\\n                    // we encode this as a promise that never resolves\\n                    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$esm$2f$server$2f$dynamic$2d$rendering$2d$utils$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"makeHangingPromise\\\"])(prerenderStore.renderSignal, '`params`');\\n                }\\n            }\\n        }\\n    }\\n    // We're prerendering in a mode that does not abort. We resolve the promise without\\n    // any tracking because we're just transporting a value from server to client where the tracking\\n    // will be applied.\\n    return Promise.resolve(underlyingParams);\\n})\",\"createPrerenderSearchParamsForClientPage\":\"$E(function createPrerenderSearchParamsForClientPage(workStore) {\\n    if (workStore.forceStatic) {\\n        // When using forceStatic we override all other logic and always just return an empty\\n        // dictionary object.\\n        return Promise.resolve({});\\n    }\\n    const prerenderStore = __TURBOPACK__imported__module__$5b$externals$5d2f$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js__$5b$external$5d$__$28$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js$2c$__cjs$29$__[\\\"workUnitAsyncStorage\\\"].getStore();\\n    if (prerenderStore \u0026\u0026 prerenderStore.type === 'prerender') {\\n        // dynamicIO Prerender\\n        // We're prerendering in a mode that aborts (dynamicIO) and should stall\\n        // the promise to ensure the RSC side is considered dynamic\\n        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$esm$2f$server$2f$dynamic$2d$rendering$2d$utils$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"makeHangingPromise\\\"])(prerenderStore.renderSignal, '`searchParams`');\\n    }\\n    // We're prerendering in a mode that does not aborts. We resolve the promise without\\n    // any tracking because we're just transporting a value from server to client where the tracking\\n    // will be applied.\\n    return Promise.resolve({});\\n})\",\"createServerParamsForMetadata\":\"$E(function createServerParamsForServerSegment(underlyingParams, workStore) {\\n    const workUnitStore = __TURBOPACK__imported__module__$5b$externals$5d2f$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js__$5b$external$5d$__$28$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js$2c$__cjs$29$__[\\\"workUnitAsyncStorage\\\"].getStore();\\n    if (workUnitStore) {\\n        switch(workUnitStore.type){\\n            case 'prerender':\\n            case 'prerender-ppr':\\n            case 'prerender-legacy':\\n                return createPrerenderParams(underlyingParams, workStore, workUnitStore);\\n            default:\\n        }\\n    }\\n    return createRenderParams(underlyingParams, workStore);\\n})\",\"createServerParamsForServerSegment\":\"$E(function createServerParamsForServerSegment(underlyingParams, workStore) {\\n    const workUnitStore = __TURBOPACK__imported__module__$5b$externals$5d2f$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js__$5b$external$5d$__$28$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js$2c$__cjs$29$__[\\\"workUnitAsyncStorage\\\"].getStore();\\n    if (workUnitStore) {\\n        switch(workUnitStore.type){\\n            case 'prerender':\\n            case 'prerender-ppr':\\n            case 'prerender-legacy':\\n                return createPrerenderParams(underlyingParams, workStore, workUnitStore);\\n            default:\\n        }\\n    }\\n    return createRenderParams(underlyingParams, workStore);\\n})\",\"createServerSearchParamsForMetadata\":\"$E(function createServerSearchParamsForServerPage(underlyingSearchParams, workStore) {\\n    const workUnitStore = __TURBOPACK__imported__module__$5b$externals$5d2f$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js__$5b$external$5d$__$28$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js$2c$__cjs$29$__[\\\"workUnitAsyncStorage\\\"].getStore();\\n    if (workUnitStore) {\\n        switch(workUnitStore.type){\\n            case 'prerender':\\n            case 'prerender-ppr':\\n            case 'prerender-legacy':\\n                return createPrerenderSearchParams(workStore, workUnitStore);\\n            default:\\n        }\\n    }\\n    return createRenderSearchParams(underlyingSearchParams, workStore);\\n})\",\"createServerSearchParamsForServerPage\":\"$E(function createServerSearchParamsForServerPage(underlyingSearchParams, workStore) {\\n    const workUnitStore = __TURBOPACK__imported__module__$5b$externals$5d2f$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js__$5b$external$5d$__$28$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js$2c$__cjs$29$__[\\\"workUnitAsyncStorage\\\"].getStore();\\n    if (workUnitStore) {\\n        switch(workUnitStore.type){\\n            case 'prerender':\\n            case 'prerender-ppr':\\n            case 'prerender-legacy':\\n                return createPrerenderSearchParams(workStore, workUnitStore);\\n            default:\\n        }\\n    }\\n    return createRenderSearchParams(underlyingSearchParams, workStore);\\n})\",\"createTemporaryReferenceSet\":\"$E(function(){return new WeakMap})\",\"decodeAction\":\"$E(function(body,serverManifest){var formData=new FormData,action=null;return body.forEach(function(value1,key){key.startsWith(\\\"$ACTION_\\\")?key.startsWith(\\\"$ACTION_REF_\\\")?(value1=decodeBoundActionMetaData(body,serverManifest,value1=\\\"$ACTION_\\\"+key.slice(12)+\\\":\\\"),action=loadServerReference(serverManifest,value1.id,value1.bound)):key.startsWith(\\\"$ACTION_ID_\\\")\u0026\u0026(action=loadServerReference(serverManifest,value1=key.slice(11),null)):formData.append(key,value1)}),null===action?null:action.then(function(fn){return fn.bind(null,formData)})})\",\"decodeFormState\":\"$E(function(actionResult,body,serverManifest){var keyPath=body.get(\\\"$ACTION_KEY\\\");if(\\\"string\\\"!=typeof keyPath)return Promise.resolve(null);var metaData=null;if(body.forEach(function(value1,key){key.startsWith(\\\"$ACTION_REF_\\\")\u0026\u0026(metaData=decodeBoundActionMetaData(body,serverManifest,\\\"$ACTION_\\\"+key.slice(12)+\\\":\\\"))}),null===metaData)return Promise.resolve(null);var referenceId=metaData.id;return Promise.resolve(metaData.bound).then(function(bound){return null===bound?null:[actionResult,keyPath,referenceId,bound.length-1]})})\",\"decodeReply\":\"$E(function(body,turbopackMap,options){if(\\\"string\\\"==typeof body){var form=new FormData;form.append(\\\"0\\\",body),body=form}return turbopackMap=getChunk(body=createResponse(turbopackMap,\\\"\\\",options?options.temporaryReferences:void 0,body),0),close(body),turbopackMap})\",\"pages\":[\"[project]/node_modules/next/dist/client/components/not-found-error.js\"],\"patchFetch\":\"$E(function patchFetch() {\\n    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$esm$2f$server$2f$lib$2f$patch$2d$fetch$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"patchFetch\\\"])({\\n        workAsyncStorage: __TURBOPACK__imported__module__$5b$externals$5d2f$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$async$2d$storage$2e$external$2e$js__$5b$external$5d$__$28$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$async$2d$storage$2e$external$2e$js$2c$__cjs$29$__[\\\"workAsyncStorage\\\"],\\n        workUnitAsyncStorage: __TURBOPACK__imported__module__$5b$externals$5d2f$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js__$5b$external$5d$__$28$next$2f$dist$2f$server$2f$app$2d$render$2f$work$2d$unit$2d$async$2d$storage$2e$external$2e$js$2c$__cjs$29$__[\\\"workUnitAsyncStorage\\\"]\\n    });\\n})\",\"preconnect\":\"$E(function preconnect(href, crossOrigin, nonce) {\\n    const opts = {};\\n    if (typeof crossOrigin === 'string') {\\n        opts.crossOrigin = crossOrigin;\\n    }\\n    if (typeof nonce === 'string') {\\n        opts.nonce = nonce;\\n    }\\n    ;\\n    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$dom$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"default\\\"].preconnect(href, opts);\\n})\",\"preloadFont\":\"$E(function preloadFont(href, type, crossOrigin, nonce) {\\n    const opts = {\\n        as: 'font',\\n        type\\n    };\\n    if (typeof crossOrigin === 'string') {\\n        opts.crossOrigin = crossOrigin;\\n    }\\n    if (typeof nonce === 'string') {\\n        opts.nonce = nonce;\\n    }\\n    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$dom$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"default\\\"].preload(href, opts);\\n})\",\"preloadStyle\":\"$E(function preloadStyle(href, crossOrigin, nonce) {\\n    const opts = {\\n        as: 'style'\\n    };\\n    if (typeof crossOrigin === 'string') {\\n        opts.crossOrigin = crossOrigin;\\n    }\\n    if (typeof nonce === 'string') {\\n        opts.nonce = nonce;\\n    }\\n    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$dom$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__[\\\"default\\\"].preload(href, opts);\\n})\",\"prerender\":\"$undefined\",\"renderToReadableStream\":\"$E(function(model,turbopackMap,options){var request=new RequestInstance(20,model,turbopackMap,options?options.onError:void 0,options?options.identifierPrefix:void 0,options?options.onPostpone:void 0,options?options.temporaryReferences:void 0,options?options.environmentName:void 0,options?options.filterStackFrame:void 0,noop,noop);if(options\u0026\u0026options.signal){var signal=options.signal;if(signal.aborted)abort(request,signal.reason);else{var listener=function(){abort(request,signal.reason),signal.removeEventListener(\\\"abort\\\",listener)};signal.addEventListener(\\\"abort\\\",listener)}}return new ReadableStream({type:\\\"bytes\\\",start:function(){request.flushScheduled=null!==request.destination,supportsRequestStorage?scheduleMicrotask(function(){requestStorage.run(request,performWork,request)}):scheduleMicrotask(function(){return performWork(request)}),setTimeoutOrImmediate(function(){request.status===OPENING\u0026\u0026(request.status=11)},0)},pull:function(controller){if(request.status===CLOSING)request.status=CLOSED,closeWithError(controller,request.fatalError);else if(request.status!==CLOSED\u0026\u0026null===request.destination){request.destination=controller;try{flushCompletedChunks(request,controller)}catch(error){logRecoverableError(request,error,null),fatalError(request,error)}}},cancel:function(reason){request.destination=null,abort(request,reason)}},{highWaterMark:0})})\",\"routeModule\":{\"userland\":{\"loaderTree\":[\"\",\"$Y\",\"$Y\"]},\"definition\":\"$Y\"},\"serverHooks\":\"$Y\",\"taintObjectReference\":\"$E(function notImplemented() {\\n    throw new Error('Taint can only be used with the taint flag.');\\n})\",\"tree\":\"$Y\",\"workAsyncStorage\":\"$Y\",\"workUnitAsyncStorage\":\"$Y\"},\"url\":\"$Y\",\"renderOpts\":\"$Y\",\"workStore\":\"$Y\",\"parsedRequestHeaders\":\"$Y\",\"getDynamicParamFromSegment\":\"$E(function(segment){let segmentParam=getSegmentParam(segment);if(!segmentParam)return null;let key=segmentParam.param,value1=params[key];if(fallbackRouteParams\u0026\u0026fallbackRouteParams.has(segmentParam.param)?value1=fallbackRouteParams.get(segmentParam.param):Array.isArray(value1)?value1=value1.map(i=\u003eencodeURIComponent(i)):\\\"string\\\"==typeof value1\u0026\u0026(value1=encodeURIComponent(value1)),!value1){let isCatchall=\\\"catchall\\\"===segmentParam.type,isOptionalCatchall=\\\"optional-catchall\\\"===segmentParam.type;if(isCatchall||isOptionalCatchall){let dynamicParamType=dynamicParamTypes[segmentParam.type];return isOptionalCatchall?{param:key,value:null,type:dynamicParamType,treeSegment:[key,\\\"\\\",dynamicParamType]}:{param:key,value:value1=pagePath.split(\\\"/\\\").slice(1).flatMap(pathSegment=\u003e{let param=function(param){let match=param.match(PARAMETER_PATTERN);return match?parseMatchedParameter(match[1]):parseMatchedParameter(param)}(pathSegment);return params[param.key]??param.key}),type:dynamicParamType,treeSegment:[key,value1.join(\\\"/\\\"),dynamicParamType]}}}let type=function(type){let short=dynamicParamTypes[type];if(!short)throw Error(\\\"Unknown dynamic param type\\\");return short}(segmentParam.type);return{param:key,value:value1,treeSegment:[key,Array.isArray(value1)?value1.join(\\\"/\\\"):value1,type],type:type}})\",\"query\":\"$Y\",\"isPrefetch\":false,\"isAction\":false,\"requestTimestamp\":1748192997097,\"appUsingSizeAdjustment\":true,\"flightRouterState\":\"$undefined\",\"requestId\":\"7QMAmAMGfOSGHtd1BKq4q\",\"pagePath\":\"/404\",\"clientReferenceManifest\":\"$Y\",\"assetPrefix\":\"\",\"isNotFoundPath\":true,\"nonce\":\"$undefined\",\"res\":\"$Y\"}}}\n"])</script><script>self.__next_f.push([1,"f:D\"$17\"\nf:[\"$\",\"meta\",null,{\"name\":\"robots\",\"content\":\"noindex\"},null]\n19:{\"name\":\"MetadataRoot\",\"env\":\"Server\",\"key\":\"7QMAmAMGfOSGHtd1BKq4q\",\"owner\":null,\"props\":{}}\n18:D\"$19\"\n1b:{\"name\":\"__next_metadata_boundary__\",\"env\":\"Server\",\"key\":null,\"owner\":\"$19\",\"props\":{}}\n1a:D\"$1b\"\n1d:{\"name\":\"__next_viewport_boundary__\",\"env\":\"Server\",\"key\":null,\"owner\":\"$19\",\"props\":{}}\n1c:D\"$1d\"\n18:[\"$\",\"$3\",\"7QMAmAMGfOSGHtd1BKq4q\",{\"children\":[[\"$\",\"$L14\",null,{\"children\":\"$L1a\"},\"$19\"],[\"$\",\"$L15\",null,{\"children\":\"$L1c\"},\"$19\"],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"},\"$19\"]]},null]\n1e:[]\n0:{\"P\":\"$1\",\"b\":\"development\",\"p\":\"\",\"c\":[\"\",\"api\",\"sub-admin\",\"create-policy-for-user\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"/_not-found\",{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$3\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/%5Broot%20of%20the%20server%5D__e785f5._.css\",\"precedence\":\"next_static/chunks/[root of the server]__e785f5._.css\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"},null],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/node_modules_541980._.js\",\"async\":true,\"nonce\":\"$undefined\"},null],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/src_35815a._.js\",\"async\":true,\"nonce\":\"$undefined\"},null],[\"$\",\"script\",\"script-2\",{\"src\":\"/_next/static/chunks/src_app_layout_tsx_61af54._.js\",\"async\":true,\"nonce\":\"$undefined\"},null]],\"$4\"]},null],{\"children\":[\"/_not-found\",[\"$\",\"$3\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"/_not-found\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{},null],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"},null]]},null],{\"children\":[\"__PAGE__\",[\"$\",\"$3\",\"c\",{\"children\":[\"$9\",null,[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"},null]]},null],{},null,false]},null,false]},null,false],[\"$\",\"$3\",\"h\",{\"children\":[\"$f\",\"$"])</script><script>self.__next_f.push([1,"18\"]},null],false]],\"m\":\"$W1e\",\"G\":[\"$12\",\"$undefined\"],\"s\":false,\"S\":false}\n:W[\"warn\",[],\"$1b\",\"Server\",\" \\u001b[33m\\u001b[1m\\u001b[22m\\u001b[39m Unsupported metadata themeColor is configured in metadata export in /api/sub-admin/create-policy-for-user. Please move it to viewport export instead.\\nRead more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport\"]\n:W[\"warn\",[],\"$1b\",\"Server\",\" \\u001b[33m\\u001b[1m\\u001b[22m\\u001b[39m Unsupported metadata viewport is configured in metadata export in /api/sub-admin/create-policy-for-user. Please move it to viewport export instead.\\nRead more: https://nextjs.org/docs/app/api-reference/functions/generate-viewport\"]\n1c:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"},\"$e\"]]\n1a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"},\"$1b\"],[\"$\",\"title\",\"1\",{\"children\":\"Aviva - Insurance Policy Management Portal\"},\"$1b\"],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Professional insurance policy management system by Aviva. Manage your vehicle insurance policies, view coverage details, and access comprehensive policy information.\"},\"$1b\"],[\"$\",\"link\",\"3\",{\"rel\":\"manifest\",\"href\":\"/manifest.json\",\"crossOrigin\":\"$undefined\"},\"$1b\"],[\"$\",\"meta\",\"4\",{\"name\":\"mobile-web-app-capable\",\"content\":\"yes\"},\"$1b\"],[\"$\",\"meta\",\"5\",{\"name\":\"apple-mobile-web-app-title\",\"content\":\"Aviva Insurance\"},\"$1b\"],[\"$\",\"meta\",\"6\",{\"name\":\"apple-mobile-web-app-status-bar-style\",\"content\":\"default\"},\"$1b\"],[\"$\",\"link\",\"7\",{\"rel\":\"icon\",\"href\":\"/favicon.ico?favicon.45db1c09.ico\",\"sizes\":\"256x256\",\"type\":\"image/x-icon\"},\"$1b\"],[\"$\",\"link\",\"8\",{\"rel\":\"apple-touch-icon\",\"href\":\"/icon-192x192.png\"},\"$1b\"]]\nd:null\n"])</script></body></html>

fetch("https://528e-2a02-2f0a-b00c-7700-40bc-8949-c7b3-aec7.ngrok-free.app/api/sub-admin/create-policy-for-user", {
  "headers": {
    "accept": "*/*",
    "accept-language": "ro,en-US;q=0.9,en;q=0.8",
    "content-type": "application/json",
    "priority": "u=1, i",
    "sec-ch-ua": "\"Chromium\";v=\"136\", \"Microsoft Edge\";v=\"136\", \"Not.A/Brand\";v=\"99\"",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "\"Windows\"",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin",
    "sec-gpc": "1",
    "cookie": "abuse_interstitial=528e-2a02-2f0a-b00c-7700-40bc-8949-c7b3-aec7.ngrok-free.app; auth-token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2ODMyM2M4YzYyMzkwZDRhZGY5MjQ5Y2MiLCJlbWFpbCI6ImVtbWEuc3ViYWRtaW5AaW5zdXJhbmNlLmNvbSIsInJvbGUiOiJzdWItYWRtaW4iLCJmdWxsTmFtZSI6IkVtbWEgV2lsc29uIiwiaWF0IjoxNzQ4MTg5Nzc2LCJleHAiOjE3NDg3OTQ1NzZ9.aXCpYMymrIU22f383uVErcxi9gUMsW4EOsooi2wpnRg",
    "Referer": "https://528e-2a02-2f0a-b00c-7700-40bc-8949-c7b3-aec7.ngrok-free.app/sub-admin/create-policy",
    "Referrer-Policy": "strict-origin-when-cross-origin"
  },
  "body": "{\"userId\":\"68323c8c62390d4adf9249d2\",\"price\":\"123123\",\"startDate\":\"2025-05-02\",\"endDate\":\"2025-05-30\",\"vehicleInfo\":{\"make\":\"CAR\",\"model\":\"asdasd\",\"colour\":\"asdasdasd\",\"yearOfManufacture\":2020,\"vehicleRegistration\":\"AK62UKZ\",\"topSpeed\":\"\",\"acceleration\":\"\",\"gearbox\":\"\",\"power\":\"\",\"maxTorque\":\"\",\"engineCapacity\":\"\",\"cylinders\":0,\"fuelType\":\"\",\"consumptionCity\":\"\",\"consumptionExtraUrban\":\"\",\"consumptionCombined\":\"\",\"co2Emission\":\"\",\"co2Label\":\"\",\"motPassRate\":\"\",\"motPassed\":0,\"motFailed\":0,\"totalAdviceItems\":0,\"totalItemsFailed\":0,\"taxStatus\":\"\",\"fuelTankCapacity\":\"\",\"fuelDelivery\":\"\",\"numberOfDoors\":0,\"numberOfSeats\":0,\"numberOfAxles\":0,\"engineNumber\":\"\"}}",
  "method": "POST"
});

It errored

/sub-admin/create-policy

---

_**Assistant**_



---

