<!-- Generated by SpecStory -->

# Email Template Style Modification (2025-05-26 06:26:56)

_**User**_

@route.ts @route.ts 

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aviva Temporary Policy - POL-000017</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            padding: 30px;
            text-align: center;
        }
        .logo {
            font-size: 32px;
            font-weight: bold;
            color: white;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }
        .content {
            padding: 30px;
        }
        .thank-you {
            font-size: 24px;
            color: #1e3a8a;
            margin-bottom: 20px;
            text-align: center;
        }
        .vehicle-card {
            background: linear-gradient(135deg, #1f2937, #374151);
            border-radius: 16px;
            padding: 24px;
            margin: 20px 0;
            color: white;
            position: relative;
            overflow: hidden;
        }
        .vehicle-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, rgba(255,255,255,0.1), transparent);
            border-radius: 50%;
            transform: translate(50%, -50%);
        }
        .policy-number {
            font-size: 14px;
            color: #9ca3af;
            margin-bottom: 8px;
        }
        .status-badge {
            background-color: #f59e0b;
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            float: right;
            margin-top: -5px;
        }
        .vehicle-name {
            font-size: 28px;
            font-weight: bold;
            margin: 15px 0;
            clear: both;
        }
        .dates {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .date-block {
            text-align: center;
        }
        .date-label {
            font-size: 14px;
            color: #9ca3af;
            margin-bottom: 5px;
        }
        .date-value {
            font-size: 18px;
            font-weight: bold;
        }
        .details-section {
            background-color: #f8fafc;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }
        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .detail-item {
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 10px;
        }
        .detail-label {
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        .detail-value {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
        }
        .payment-section {
            background: linear-gradient(135deg, #059669, #10b981);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .payment-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .payment-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .payment-method {
            font-size: 14px;
            opacity: 0.9;
        }
        .total-price {
            font-size: 24px;
            font-weight: bold;
        }
        .footer {
            background-color: #1f2937;
            color: #9ca3af;
            padding: 30px;
            font-size: 12px;
            line-height: 1.6;
        }
        .footer h3 {
            color: white;
            margin-bottom: 15px;
        }
        .footer p {
            margin-bottom: 10px;
        }
        .contact-info {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #374151;
        }
        @media (max-width: 600px) {
            .details-grid {
                grid-template-columns: 1fr;
            }
            .dates {
                flex-direction: column;
                gap: 15px;
            }
            .payment-details {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="email-container">
        <!-- Header with Logo -->
        <div class="header">
            <div class="logo">AVIVA</div>
            <div style="color: rgba(255,255,255,0.9); font-size: 16px;">Insurance You Can Trust</div>
        </div>

        <!-- Content -->
        <div class="content">
            <div class="thank-you">Thank you for purchasing a temporary policy!</div>
            
            <!-- Vehicle Card -->
            <div class="vehicle-card">
                <div class="policy-number">POL-000017</div>
                <div class="status-badge">DUE TO RENEW</div>
                <div class="vehicle-name">TOYOTA ESTIMA</div>
                
                <div class="dates">
                    <div class="date-block">
                        <div class="date-label">Start</div>
                        <div class="date-value">14/05/2025</div>
                    </div>
                    <div class="date-block">
                        <div class="date-label">End</div>
                        <div class="date-value">31/05/2025</div>
                    </div>
                </div>
            </div>

            <!-- Policy Details -->
            <div class="details-section">
                <h3 style="margin-top: 0; color: #1e293b; font-size: 20px;">Policy Details</h3>
                
                <div class="details-grid">
                    <div class="detail-item">
                        <div class="detail-label">Full Name</div>
                        <div class="detail-value">John Michael Smith</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Date of Birth</div>
                        <div class="detail-value">15/03/1985</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Vehicle Year</div>
                        <div class="detail-value">2018</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Vehicle Color</div>
                        <div class="detail-value">Silver</div>
                    </div>
                </div>

                <div class="detail-item" style="grid-column: 1 / -1;">
                    <div class="detail-label">Address</div>
                    <div class="detail-value">42 Maple Street, Birmingham, B12 9QR, United Kingdom</div>
                </div>

                <div class="details-grid" style="margin-top: 20px;">
                    <div class="detail-item">
                        <div class="detail-label">Policy Length</div>
                        <div class="detail-value">17 Days</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Coverage Type</div>
                        <div class="detail-value">Comprehensive</div>
                    </div>
                </div>
            </div>

            <!-- Payment Information -->
            <div class="payment-section">
                <div class="payment-title">Payment Confirmation</div>
                <div class="payment-details">
                    <div>
                        <div class="payment-method">Visa ending in ****4521</div>
                        <div style="font-size: 12px; opacity: 0.8; margin-top: 5px;">Payment processed successfully</div>
                    </div>
                    <div class="total-price">Â£89.50</div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <h3>Important Information</h3>
            
            <p><strong>Terms & Conditions:</strong> This temporary insurance policy is subject to our standard terms and conditions. Please ensure you have read and understood all policy documents provided.</p>
            
            <p><strong>Claims:</strong> In the event of an incident, please contact our 24/7 claims hotline immediately on 0800 202 2040. Failure to report claims promptly may affect your coverage.</p>
            
            <p><strong>Policy Documents:</strong> Your full policy schedule and certificate of motor insurance will be sent separately via post within 2-3 business days.</p>
            
            <p><strong>Cancellation:</strong> You have a 14-day cooling off period during which you can cancel this policy for a full refund, provided no claims have been made.</p>
            
            <div class="contact-info">
                <p><strong>Need Help?</strong></p>
                <p>Customer Service: 0800 285 1088 (Mon-Fri 8am-8pm, Sat 9am-5pm)</p>
                <p>Email: customer.service@aviva.co.uk</p>
                <p>Website: www.aviva.co.uk</p>
            </div>
            
            <p style="margin-top: 20px; font-size: 11px; opacity: 0.7;">
                Aviva Insurance Limited. Registered in England No. 2494086. 
                Registered Office: Pitheavlis, Perth PH2 0NH. 
                Authorised by the Prudential Regulation Authority and regulated by the Financial Conduct Authority and the Prudential Regulation Authority.
            </p>
        </div>
    </div>
</body>
</html>


Make the email more like this.



---

_**Assistant**_

I'll update the email templates in both the admin and sub-admin policy send-email routes to match the modern, professional design you've provided. Let me examine the current files and make the necessary changes.

---

Read file: src/app/api/admin/policies/send-email/route.ts

---

Now I'll update the admin policy send-email route with the new modern email template:

---



---

Now I'll update the sub-admin policy send-email route with the same modern template:

---



---

Now let me also update the email template in the `src/lib/email.ts` file to match the same modern design:

---



---

Let me read the email.ts file to see its current structure:

---

Read file: src/lib/email.ts

---

I can see the email.ts file has a different template structure. Let me update the registration field reference:

---



---

Let me also update the PDF generation section to use the correct vehicle registration field:

---

Read file: src/lib/email.ts

---

Now let me update the PDF generation to use the correct vehicle registration field:

---



---

Perfect! I've successfully updated both the admin and sub-admin policy send-email routes with the modern, professional email template design that matches the style you provided. Here's a summary of the changes made:

## Key Updates Made:

### 1. **Modern Email Design**
- **Blue gradient header** with large "AVIVA" logo and tagline
- **Dark vehicle card** with policy number, status badge, and vehicle name
- **Clean grid layout** for policy details with proper spacing
- **Green payment confirmation section** with professional styling
- **Dark footer** with comprehensive contact information

### 2. **Enhanced Features**
- **Responsive design** that works on mobile devices
- **Policy duration calculation** showing the number of days
- **Status badge** showing "ACTIVE" for policies
- **Professional typography** using Segoe UI font family
- **Proper color scheme** with blue, green, and gray tones

### 3. **Content Improvements**
- **Comprehensive footer** with terms, claims info, and contact details
- **Professional contact information** including phone numbers and email
- **Legal disclaimers** and regulatory information
- **Clear policy details** in an organized grid format

### 4. **Data Consistency**
- **Fixed vehicle registration** to use `policy.vehicleInfo.vehicleRegistration` instead of `user.vehicleRegistration`
- **Updated both email templates and PDF generation** to use consistent data sources

### Files Updated:
1. `src/app/api/admin/policies/send-email/route.ts` - Admin email template
2. `src/app/api/sub-admin/policies/send-email/route.ts` - Sub-admin email template  
3. `src/lib/email.ts` - Fixed vehicle registration field reference

The email templates now provide a much more professional and modern appearance that matches the design aesthetic you provided, while maintaining all the necessary policy information and legal requirements for insurance communications.

---

